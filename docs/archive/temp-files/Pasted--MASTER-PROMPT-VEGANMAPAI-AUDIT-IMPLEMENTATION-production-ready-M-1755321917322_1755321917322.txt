üîç MASTER PROMPT: VEGANMAPAI AUDIT & IMPLEMENTATION

üéØ –¶–µ–ª: –ü–æ—Å—Ç–∏–≥–Ω–∏ —Å—Ç–∞–±–∏–ª–µ–Ω, production-ready MVP –Ω–∞ VeganMapAI —Å —è—Å–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –æ—Å–Ω–æ–≤–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏ –∏ –ø—ä—Ç –∫—ä–º Beta.

---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∏ –∫–æ—Ä–µ–∫—Ü–∏–∏
- –ü–æ–ø—Ä–∞–≤–∏ –≤—Å–∏—á–∫–∏ TypeScript –≥—Ä–µ—à–∫–∏ (snake_case ‚Üí camelCase) –≤ `server/routes.ts` (24 –±—Ä–æ—è).
- –í—ä–≤–µ–¥–∏ **geohash-based caching** –∑–∞ Google Maps API (TTL 7 –¥–Ω–∏, precision 6 ~2km).
- –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–π **rate limiting middleware**: 300 –∑–∞—è–≤–∫–∏/IP/15–º–∏–Ω + –±–∞–≤–Ω–æ –æ—Ç–≥–æ–≤–∞—Ä—è–Ω–µ —Å–ª–µ–¥ 50% –ª–∏–º–∏—Ç.
- –ü–æ—Ç–≤—ä—Ä–¥–∏ CORS –∏ API Base URL (frontend ‚Üî backend).
- In-memory cache (TTL 5 –º–∏–Ω) –¥–∞ –æ—Å—Ç–∞–Ω–µ –∞–∫—Ç–∏–≤–µ–Ω.

---

## 2. Frontend / PWA
- PWA —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `index.html`, `style.css`, `script.js`, `manifest.json`, `service-worker.js`.
- Screens (mobile-first):
  1. Login (Google/Apple OAuth).
  2. Profile Setup (–¥–∏–µ—Ç–∞, –∞–ª–µ—Ä–≥–∏–∏, –∫—É—Ö–Ω–∏, —Ü–µ–Ω–∞).
  3. Main Map: 2 km radius, pins —Å Vegan Score (—Ü–≤–µ—Ç–µ–Ω bubble), action menu (—Ä–∞–∑–≥–ª–µ–¥–∞–π, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è, –ø–æ—Ä—ä—á–∫–∞ –æ–Ω–ª–∞–π–Ω, –ª—é–±–∏–º–∏).
  4. AI Chat Agent screen (text + mic).
  5. Restaurant Details (Vegan Score breakdown, allergen check, Taste Match, –±—É—Ç–æ–Ω–∏ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è/–ø–æ—Ä—ä—á–∫–∞).
  6. Advanced Search (—Ñ–∏–ª—Ç—Ä–∏ –ø–æ score, allergens, cuisine).
  7. Profile (–∏—Å—Ç–æ—Ä–∏—è, –ª—é–±–∏–º–∏, logout).
- –í–∫–ª—é—á–∏ responsive –¥–∏–∑–∞–π–Ω (Poppins/Open Sans, minimalist white/green/gray).

---

## 3. Voice & AI –∞–≥–µ–Ω—Ç–∏
- –í–≥—Ä–∞–¥–∏ **Whisper (STT)** –∏ **ElevenLabs (TTS)** –∑–∞ hands-free –∞—Å–∏—Å—Ç–µ–Ω—Ç.
- –í—ä–≤–µ–¥–∏ –≥–æ—Ç–æ–≤–∏—Ç–µ voice –ø—Ä–æ–º–ø—Ç–∏:
  - –û—Ç–≥–æ–≤–æ—Ä–∏ –¥–æ 1‚Äì2 –∏–∑—Ä–µ—á–µ–Ω–∏—è, –∫—Ä–∞—Ç–∫–∏ –∏ —è—Å–Ω–∏.
  - –ê–∫–æ –ª–∏–ø—Å–≤–∞ –ª–æ–∫–∞—Ü–∏—è ‚Üí –ø–æ–∏—Å–∫–∞–π –¥–æ—Å—Ç—ä–ø.
  - –ê–∫–æ –ª–∏–ø—Å–≤–∞ –∏–º–µ ‚Üí –æ–±—Ä—ä—â–µ–Ω–∏–µ ‚Äû–ø—Ä–∏—è—Ç–µ–ª—é‚Äú.
- AI –∞–≥–µ–Ω—Ç–∏ (CrewAI/OpenAI):
  - ExplainabilityAgent (–æ–±—è—Å–Ω—è–≤–∞ Vegan Score).
  - RecommendationAgent (–ø—Ä–µ–ø–æ—Ä—ä–∫–∏).
  - MemoryAgent (–∑–∞–ø–∞–∑–≤–∞ –Ω–∞–≤–∏—Ü–∏ –∏ –ª—é–±–∏–º–∏).
  - AnalyticsAgent (–ø–æ–≤–µ–¥–µ–Ω–∏–µ, –æ—Ç—á–µ—Ç–∏).
- Multi-agent orchestration (CrewAI –∏–ª–∏ LangChain/LangGraph).

---

## 4. üö´ –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ & –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è (–û–¢–õ–û–ñ–ï–ù–û)
- –†–µ–∞–ª–Ω–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å—ä—Å Stripe/PayPal **–¥–∞ –ù–ï —Å–µ –ø—Ä–∞–≤—è—Ç —Å–µ–≥–∞** (–∏–∑–∏—Å–∫–≤–∞—Ç —é—Ä. –ª–∏—Ü–µ + –±–∞–Ω–∫–æ–≤–∞ —Å–º–µ—Ç–∫–∞).
- –î–æ–±–∞–≤–∏ —Å–∞–º–æ **placeholder-–∏ / mock functions** –∑–∞:
  - Upgrade to Premium / Premium Max.
  - Payment initiation flow.
  - Upsell —Å—ä–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –∏–∑—á–µ—Ä–ø–≤–∞–Ω–µ –Ω–∞ –ª–∏–º–∏—Ç–∏—Ç–µ.
- –°–ª–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —â–µ –∑–∞–º–µ–Ω–∏–º placeholder-–∏—Ç–µ —Å —Ä–µ–∞–ª–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è.

---

## 5. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ & UX
- –°—ä–±–∏—Ä–∞–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ: zoom/pan, —Ç—ä—Ä—Å–µ–Ω–∏—è, –±—É—Ç–æ–Ω–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç.
- Monthly AnalyticsAgent report (–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏).
- Feedback loop ‚Üí –ø–æ–¥–æ–±—Ä—è–≤–∞ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏—Ç–µ.
- –ê–¥–º–∏–Ω Dashboard (healthz, API usage, —Ä–∞–∑—Ö–æ–¥–∏).
- UI/UX –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è —Å–ø–æ—Ä–µ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏—è —Ç–µ—Å—Ç:
  - –ü–æ-—è—Å–Ω–∏ Call-to-Action –±—É—Ç–æ–Ω–∏.
  - –í–∏–∑—É–∞–ª–Ω–∞ –π–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ä—Ç–∞/—Ç—ä—Ä—Å–µ–Ω–µ.
  - –ü–æ–¥–æ–±—Ä–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ –º–µ–Ω—é—Ç–∞.

---

## 6. Roadmap & –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∏
### MVP (Q3 2025)
- Backend —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (TS fix, geohash cache, rate limiting).
- PWA —Å Map + Profile + Details.
- Basic AI Chat (text).
- Placeholder-–∏ –∑–∞ Premium flow (–±–µ–∑ —Ä–µ–∞–ª–Ω–∏ –ø–ª–∞—â–∞–Ω–∏—è).
- AnalyticsAgent logging.

### Beta (Q4 2025)
- Whisper + ElevenLabs voice.
- Multi-agent orchestration (CrewAI).
- Advanced Search + —Ñ–∏–ª—Ç—Ä–∏.
- MemoryAgent (–ª—é–±–∏–º–∏, –∏—Å—Ç–æ—Ä–∏—è).
- Marketing launch: NYC, LA, SF, Seattle, Austin.

### v1.0 (Q1 2026)
- Full personalization (–≤–∫—É—Å–æ–≤–∏ –ø—Ä–æ—Ñ–∏–ª–∏, health fit).
- Dashboard –∑–∞ –∞–¥–º–∏–Ω.
- Trust transparency layer (–∏–∑—Ç–æ—á–Ω–∏—Ü–∏ –Ω–∞ Vegan Score).
- –†–µ–∞–ª–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Stripe/PayPal (—Å–ª–µ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è).
- Global expansion mode (multi-language, GDPR-ready).

---

üìå –ò–∑–≤–µ–¥–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–∞ —Ñ–æ—Ä–º–∞:  
- ‚úÖ –†–∞–±–æ—Ç–µ—â–æ  
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∏  
- üöÄ –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏ (—Å –∫–æ–¥ –∞–∫–æ –µ –Ω—É–∂–Ω–æ)
